<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="kmdtty.css">
<title>Hoare Logic</title>
<script src="kmdtty_mathjax_setting.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
</head>
<body>
<div class="container">
<h1>Notes on Hoare Logic</h1>
<h2>1. Introduction</h2>
<p>
Hoare Logic is a logic for progamming languages. It is a logic to prove programs.
</p>
<p>
For example, we can imagine a C program which adding two integers.
</p>
<pre class="code">
int add(int x, int y) {
    int z = 0;
    z = x + y;
    return z;
}
</pre>
<p>
Then, <code>add(2,3)</code> returns $5$, <code>add(-100, 100)</code> returnds $0$.
</p>
<p>
To verify, express, prove the program, Hoare Logic introduce Hoare triple.
</p>
<div class="definition" text="Hoare Triple">
Hoare triple is a (P, S, Q) that is denoted:
\[\big\{P\big\}\, S\, \big\{Q\big\}\]
where $P$ is the precondition that is true before $S$ is executed, $S$ is a subset of program list, Q is the postcondition that is true after the $S$ are executed.
</div>
<p>For example,</p>
<p>$\big\{x + y \Leftrightarrow 4\big\}$</p>
<p>
z = x + y;
</p>
<p>$\big\{z \Leftrightarrow 4\big\}$</p>
<p>
Here, the precondition $P$ is $x + y \Leftrightarrow 4$, and a program $S$ is <code>z = x + y</code>, and the postcondition $Q$ is $z \Leftrightarrow 4$. 
</p>
<p>
What we want to do with Hoare Toriple is to prove $Q$ from the $P$ and $S$. To do this, we need a <em>system</em> for reasoning from the precondition to the post condition. Formal deductive systems are consists of <em>Axioms</em> and <em>Rule</em>, so let's start to consider its axioms.
</p>
<div class="definition" text="Axiom of Assignment">
\begin{equation}
\frac{}{
\big\{ Q[\text{f/x}] \big\}\,\,
\text{x = f}\,\,
\big\{Q\big\}
}
\end{equation}
where <b>x</b> is a variable of a program, <b>f</b> is a expression of a program, and $Q[\text{f/x}]$ denotes a replacement all occurense of <b>f</b> in $Q$ with <b>x</b> .
</div>
<p>
Having Axiom of Assignment, now we can prove the following Hoare Triple.</p>
<p>\begin{equation*}
\big\{x + y \Leftrightarrow 4\big\} \,
\text{z = x + y;} \,
\big\{z \Leftrightarrow 4\big\}
\end{equation*}
</p>
<p>
$z \Leftrightarrow 4$ can be replaced with $(z \Leftrightarrow 4)[\text{x+y/z}]$ by Axiom of Assignment, then we immediately get $ x + y \Leftrightarrow 4$.
<span class="qed">$\Box$</span>
</p>
<p>
This is a super simple toy example, but likewise, we define several Axioms to prove programs.
</p>
<p>
(Q: How to handle C-style the same time type definition and assignment.)
</p>
<h2>Rules of hoare logic</h2>
<div class="definition" text="Concate Rule">
\begin{equation}
\frac{
\big\{P\big\} A \big\{P_1\big\} \, \, \, \, \,
\big\{P_1\big\} B \big\{Q\big\}
}{
\big\{ P \big\} \,
\text{A; B} \,
\big\{ Q \big\}
}
\end{equation}
</div>
<div class="definition" text="If Rule">
\begin{equation}
\frac{
  \big\{ b \wedge P\big\}  s_1 \big\{ Q\big\} \, \, \, \, \, \, \,
  \big\{ \neg b \wedge P\big\}  s_2 \big\{ Q\big\}
  }
  {
\big\{ P \big\}  \, \,
\text{if (b) \{$s_1$\} else \{ $s_2$ \}  } \, \,
\big\{ Q \big\}
}
\end{equation}
</div>
<div class="definition" text="Consequence Rule">
\begin{equation}
\end{equation}
</div>
<div class="definition" text="Loop Rule">
\begin{equation}
\big\{ \models A \big\} \, \,
\text{while (A) { s }} \, \,
\big\{ \models \neg A \wedge s \big\}
\end{equation}
</div>
<p>
(Note: the above definitions are remaing wrong rules.)
</p>
<h2>Weakest Precondition</h2>
<ul>
<li>Construct WC()</li>
</ul>

<h2>Verification Condition</h2>
<ul>
<li>Construct VC()</li>
</ul>
<h2>Automated Theorem Proving</h2>
<ul>
<li>Make examples of automated theorem proving using VC() on a program.
</ul>
<h2>References</h2>
<ol>
<li>Hoare, C. A. R. An axiomatic basis for computer programming. Commun. ACM 12, 576â€“580 (1969)
</ol>
<hr>
<nav class="mb-3"><a href="index.html">Home</a> &gt; Hoare Logic</nav>
</div>
</body>
</html>
